{"ast":null,"code":"import axios from \"axios\";\nexport default class ApiService {\n  static getHeader() {\n    const token = localStorage.getItem(\"token\");\n    return {\n      Authorization: `Bearer ${token}`,\n      \"Content-Type\": \"application/json\"\n    };\n  }\n\n  /**AUTH */\n\n  /* This  register a new user */\n  static async registerUser(registration) {\n    const response = await axios.post(`${this.BASE_URL}/auth/register`, registration);\n    return response.data;\n  }\n\n  /* This  login a registered user */\n  static async loginUser(loginDetails) {\n    const response = await axios.post(`${this.BASE_URL}/auth/login`, loginDetails);\n    return response.data;\n  }\n\n  /***USERS */\n\n  /*  This is  to get the user profile */\n  static async getAllUsers() {\n    const response = await axios.get(`${this.BASE_URL}/users/all`, {\n      headers: this.getHeader()\n    });\n    return response.data;\n  }\n  static async getUserProfile() {\n    const response = await axios.get(`${this.BASE_URL}/users/get-logged-in-profile-info`, {\n      headers: this.getHeader()\n    });\n    return response.data;\n  }\n\n  /* This is the  to get a single user */\n  static async getUser(userId) {\n    const response = await axios.get(`${this.BASE_URL}/users/get-by-id/${userId}`, {\n      headers: this.getHeader()\n    });\n    return response.data;\n  }\n\n  /* This is the  to get user bookings by the user id */\n  static async getUserBookings(userId) {\n    const response = await axios.get(`${this.BASE_URL}/users/get-user-bookings/${userId}`, {\n      headers: this.getHeader()\n    });\n    return response.data;\n  }\n\n  /* This is to delete a user */\n  static async deleteUser(userId) {\n    const response = await axios.delete(`${this.BASE_URL}/users/delete/${userId}`, {\n      headers: this.getHeader()\n    });\n    return response.data;\n  }\n\n  /**ROOM */\n  /* This  adds a new room room to the database */\n  static async addRoom(formData) {\n    const result = await axios.post(`${this.BASE_URL}/rooms/add`, formData, {\n      headers: {\n        ...this.getHeader(),\n        \"Content-Type\": \"multipart/form-data\"\n      }\n    });\n    return result.data;\n  }\n\n  /* This  gets all availavle rooms */\n  static async getAllAvailableRooms() {\n    const result = await axios.get(`${this.BASE_URL}/rooms/all-available-rooms`);\n    return result.data;\n  }\n\n  /* This  gets all availavle by dates rooms from the database with a given date and a room type */\n  static async getAvailableRoomsByDateAndType(checkInDate, checkOutDate, roomType) {\n    const result = await axios.get(`${this.BASE_URL}/rooms/available-rooms-by-date-and-type?checkInDate=${checkInDate}\n\t\t&checkOutDate=${checkOutDate}&roomType=${roomType}`);\n    return result.data;\n  }\n\n  /* This  gets all room types from thee database */\n  static async getRoomTypes() {\n    const response = await axios.get(`${this.BASE_URL}/rooms/types`);\n    return response.data;\n  }\n  /* This  gets all rooms from the database */\n  static async getAllRooms() {\n    const result = await axios.get(`${this.BASE_URL}/rooms/all`);\n    return result.data;\n  }\n  /* This funcction gets a room by the id */\n  static async getRoomById(roomId) {\n    const result = await axios.get(`${this.BASE_URL}/rooms/room-by-id/${roomId}`);\n    return result.data;\n  }\n\n  /* This  deletes a room by the Id */\n  static async deleteRoom(roomId) {\n    const result = await axios.delete(`${this.BASE_URL}/rooms/delete/${roomId}`, {\n      headers: this.getHeader()\n    });\n    return result.data;\n  }\n\n  /* This updates a room */\n  static async updateRoom(roomId, formData) {\n    const result = await axios.put(`${this.BASE_URL}/rooms/update/${roomId}`, formData, {\n      headers: {\n        ...this.getHeader(),\n        \"Content-Type\": \"multipart/form-data\"\n      }\n    });\n    return result.data;\n  }\n\n  /**BOOKING */\n  /* This  saves a new booking to the databse */\n  static async bookRoom(roomId, userId, booking) {\n    console.log(\"USER ID IS: \" + userId);\n    const response = await axios.post(`${this.BASE_URL}/bookings/book-room/${roomId}/${userId}`, booking, {\n      headers: this.getHeader()\n    });\n    return response.data;\n  }\n\n  /* This  gets alll bokings from the database */\n  static async getAllBookings() {\n    const result = await axios.get(`${this.BASE_URL}/bookings/all`, {\n      headers: this.getHeader()\n    });\n    return result.data;\n  }\n\n  /* This  get booking by the cnfirmation code */\n  static async getBookingByConfirmationCode(bookingCode) {\n    const result = await axios.get(`${this.BASE_URL}/bookings/get-by-confirmation-code/${bookingCode}`);\n    return result.data;\n  }\n\n  /* This is the  to cancel user booking */\n  static async cancelBooking(bookingId) {\n    const result = await axios.delete(`${this.BASE_URL}/bookings/cancel/${bookingId}`, {\n      headers: this.getHeader()\n    });\n    return result.data;\n  }\n\n  /**AUTHENTICATION CHECKER */\n  static logout() {\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"role\");\n  }\n  static isAuthenticated() {\n    const token = localStorage.getItem(\"token\");\n    return !!token;\n  }\n  static isAdmin() {\n    const role = localStorage.getItem(\"role\");\n    return role === \"ADMIN\";\n  }\n  static isUser() {\n    const role = localStorage.getItem(\"role\");\n    return role === \"USER\";\n  }\n}\n// export default new ApiService();\nApiService.BASE_URL = \"http://localhost:4040\";","map":{"version":3,"names":["axios","ApiService","getHeader","token","localStorage","getItem","Authorization","registerUser","registration","response","post","BASE_URL","data","loginUser","loginDetails","getAllUsers","get","headers","getUserProfile","getUser","userId","getUserBookings","deleteUser","delete","addRoom","formData","result","getAllAvailableRooms","getAvailableRoomsByDateAndType","checkInDate","checkOutDate","roomType","getRoomTypes","getAllRooms","getRoomById","roomId","deleteRoom","updateRoom","put","bookRoom","booking","console","log","getAllBookings","getBookingByConfirmationCode","bookingCode","cancelBooking","bookingId","logout","removeItem","isAuthenticated","isAdmin","role","isUser"],"sources":["D:/DACN/phegon-hotel-booking-and-management/frontend/src/service/ApiService.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nexport default class ApiService {\r\n  static BASE_URL = \"http://localhost:4040\";\r\n\r\n  static getHeader() {\r\n    const token = localStorage.getItem(\"token\");\r\n    return {\r\n      Authorization: `Bearer ${token}`,\r\n      \"Content-Type\": \"application/json\",\r\n    };\r\n  }\r\n\r\n  /**AUTH */\r\n\r\n  /* This  register a new user */\r\n  static async registerUser(registration) {\r\n    const response = await axios.post(\r\n      `${this.BASE_URL}/auth/register`,\r\n      registration\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  /* This  login a registered user */\r\n  static async loginUser(loginDetails) {\r\n    const response = await axios.post(\r\n      `${this.BASE_URL}/auth/login`,\r\n      loginDetails\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  /***USERS */\r\n\r\n  /*  This is  to get the user profile */\r\n  static async getAllUsers() {\r\n    const response = await axios.get(`${this.BASE_URL}/users/all`, {\r\n      headers: this.getHeader(),\r\n    });\r\n    return response.data;\r\n  }\r\n\r\n  static async getUserProfile() {\r\n    const response = await axios.get(\r\n      `${this.BASE_URL}/users/get-logged-in-profile-info`,\r\n      {\r\n        headers: this.getHeader(),\r\n      }\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  /* This is the  to get a single user */\r\n  static async getUser(userId) {\r\n    const response = await axios.get(\r\n      `${this.BASE_URL}/users/get-by-id/${userId}`,\r\n      {\r\n        headers: this.getHeader(),\r\n      }\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  /* This is the  to get user bookings by the user id */\r\n  static async getUserBookings(userId) {\r\n    const response = await axios.get(\r\n      `${this.BASE_URL}/users/get-user-bookings/${userId}`,\r\n      {\r\n        headers: this.getHeader(),\r\n      }\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  /* This is to delete a user */\r\n  static async deleteUser(userId) {\r\n    const response = await axios.delete(\r\n      `${this.BASE_URL}/users/delete/${userId}`,\r\n      {\r\n        headers: this.getHeader(),\r\n      }\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  /**ROOM */\r\n  /* This  adds a new room room to the database */\r\n  static async addRoom(formData) {\r\n    const result = await axios.post(`${this.BASE_URL}/rooms/add`, formData, {\r\n      headers: {\r\n        ...this.getHeader(),\r\n        \"Content-Type\": \"multipart/form-data\",\r\n      },\r\n    });\r\n    return result.data;\r\n  }\r\n\r\n  /* This  gets all availavle rooms */\r\n  static async getAllAvailableRooms() {\r\n    const result = await axios.get(\r\n      `${this.BASE_URL}/rooms/all-available-rooms`\r\n    );\r\n    return result.data;\r\n  }\r\n\r\n  /* This  gets all availavle by dates rooms from the database with a given date and a room type */\r\n  static async getAvailableRoomsByDateAndType(\r\n    checkInDate,\r\n    checkOutDate,\r\n    roomType\r\n  ) {\r\n    const result = await axios.get(\r\n      `${this.BASE_URL}/rooms/available-rooms-by-date-and-type?checkInDate=${checkInDate}\r\n\t\t&checkOutDate=${checkOutDate}&roomType=${roomType}`\r\n    );\r\n    return result.data;\r\n  }\r\n\r\n  /* This  gets all room types from thee database */\r\n  static async getRoomTypes() {\r\n    const response = await axios.get(`${this.BASE_URL}/rooms/types`);\r\n    return response.data;\r\n  }\r\n  /* This  gets all rooms from the database */\r\n  static async getAllRooms() {\r\n    const result = await axios.get(`${this.BASE_URL}/rooms/all`);\r\n    return result.data;\r\n  }\r\n  /* This funcction gets a room by the id */\r\n  static async getRoomById(roomId) {\r\n    const result = await axios.get(\r\n      `${this.BASE_URL}/rooms/room-by-id/${roomId}`\r\n    );\r\n    return result.data;\r\n  }\r\n\r\n  /* This  deletes a room by the Id */\r\n  static async deleteRoom(roomId) {\r\n    const result = await axios.delete(\r\n      `${this.BASE_URL}/rooms/delete/${roomId}`,\r\n      {\r\n        headers: this.getHeader(),\r\n      }\r\n    );\r\n    return result.data;\r\n  }\r\n\r\n  /* This updates a room */\r\n  static async updateRoom(roomId, formData) {\r\n    const result = await axios.put(\r\n      `${this.BASE_URL}/rooms/update/${roomId}`,\r\n      formData,\r\n      {\r\n        headers: {\r\n          ...this.getHeader(),\r\n          \"Content-Type\": \"multipart/form-data\",\r\n        },\r\n      }\r\n    );\r\n    return result.data;\r\n  }\r\n\r\n  /**BOOKING */\r\n  /* This  saves a new booking to the databse */\r\n  static async bookRoom(roomId, userId, booking) {\r\n    console.log(\"USER ID IS: \" + userId);\r\n\r\n    const response = await axios.post(\r\n      `${this.BASE_URL}/bookings/book-room/${roomId}/${userId}`,\r\n      booking,\r\n      {\r\n        headers: this.getHeader(),\r\n      }\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  /* This  gets alll bokings from the database */\r\n  static async getAllBookings() {\r\n    const result = await axios.get(`${this.BASE_URL}/bookings/all`, {\r\n      headers: this.getHeader(),\r\n    });\r\n    return result.data;\r\n  }\r\n\r\n  /* This  get booking by the cnfirmation code */\r\n  static async getBookingByConfirmationCode(bookingCode) {\r\n    const result = await axios.get(\r\n      `${this.BASE_URL}/bookings/get-by-confirmation-code/${bookingCode}`\r\n    );\r\n    return result.data;\r\n  }\r\n\r\n  /* This is the  to cancel user booking */\r\n  static async cancelBooking(bookingId) {\r\n    const result = await axios.delete(\r\n      `${this.BASE_URL}/bookings/cancel/${bookingId}`,\r\n      {\r\n        headers: this.getHeader(),\r\n      }\r\n    );\r\n    return result.data;\r\n  }\r\n\r\n  /**AUTHENTICATION CHECKER */\r\n  static logout() {\r\n    localStorage.removeItem(\"token\");\r\n    localStorage.removeItem(\"role\");\r\n  }\r\n\r\n  static isAuthenticated() {\r\n    const token = localStorage.getItem(\"token\");\r\n    return !!token;\r\n  }\r\n\r\n  static isAdmin() {\r\n    const role = localStorage.getItem(\"role\");\r\n    return role === \"ADMIN\";\r\n  }\r\n\r\n  static isUser() {\r\n    const role = localStorage.getItem(\"role\");\r\n    return role === \"USER\";\r\n  }\r\n}\r\n// export default new ApiService();\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,eAAe,MAAMC,UAAU,CAAC;EAG9B,OAAOC,SAASA,CAAA,EAAG;IACjB,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,OAAO;MACLC,aAAa,EAAG,UAASH,KAAM,EAAC;MAChC,cAAc,EAAE;IAClB,CAAC;EACH;;EAEA;;EAEA;EACA,aAAaI,YAAYA,CAACC,YAAY,EAAE;IACtC,MAAMC,QAAQ,GAAG,MAAMT,KAAK,CAACU,IAAI,CAC9B,GAAE,IAAI,CAACC,QAAS,gBAAe,EAChCH,YACF,CAAC;IACD,OAAOC,QAAQ,CAACG,IAAI;EACtB;;EAEA;EACA,aAAaC,SAASA,CAACC,YAAY,EAAE;IACnC,MAAML,QAAQ,GAAG,MAAMT,KAAK,CAACU,IAAI,CAC9B,GAAE,IAAI,CAACC,QAAS,aAAY,EAC7BG,YACF,CAAC;IACD,OAAOL,QAAQ,CAACG,IAAI;EACtB;;EAEA;;EAEA;EACA,aAAaG,WAAWA,CAAA,EAAG;IACzB,MAAMN,QAAQ,GAAG,MAAMT,KAAK,CAACgB,GAAG,CAAE,GAAE,IAAI,CAACL,QAAS,YAAW,EAAE;MAC7DM,OAAO,EAAE,IAAI,CAACf,SAAS,CAAC;IAC1B,CAAC,CAAC;IACF,OAAOO,QAAQ,CAACG,IAAI;EACtB;EAEA,aAAaM,cAAcA,CAAA,EAAG;IAC5B,MAAMT,QAAQ,GAAG,MAAMT,KAAK,CAACgB,GAAG,CAC7B,GAAE,IAAI,CAACL,QAAS,mCAAkC,EACnD;MACEM,OAAO,EAAE,IAAI,CAACf,SAAS,CAAC;IAC1B,CACF,CAAC;IACD,OAAOO,QAAQ,CAACG,IAAI;EACtB;;EAEA;EACA,aAAaO,OAAOA,CAACC,MAAM,EAAE;IAC3B,MAAMX,QAAQ,GAAG,MAAMT,KAAK,CAACgB,GAAG,CAC7B,GAAE,IAAI,CAACL,QAAS,oBAAmBS,MAAO,EAAC,EAC5C;MACEH,OAAO,EAAE,IAAI,CAACf,SAAS,CAAC;IAC1B,CACF,CAAC;IACD,OAAOO,QAAQ,CAACG,IAAI;EACtB;;EAEA;EACA,aAAaS,eAAeA,CAACD,MAAM,EAAE;IACnC,MAAMX,QAAQ,GAAG,MAAMT,KAAK,CAACgB,GAAG,CAC7B,GAAE,IAAI,CAACL,QAAS,4BAA2BS,MAAO,EAAC,EACpD;MACEH,OAAO,EAAE,IAAI,CAACf,SAAS,CAAC;IAC1B,CACF,CAAC;IACD,OAAOO,QAAQ,CAACG,IAAI;EACtB;;EAEA;EACA,aAAaU,UAAUA,CAACF,MAAM,EAAE;IAC9B,MAAMX,QAAQ,GAAG,MAAMT,KAAK,CAACuB,MAAM,CAChC,GAAE,IAAI,CAACZ,QAAS,iBAAgBS,MAAO,EAAC,EACzC;MACEH,OAAO,EAAE,IAAI,CAACf,SAAS,CAAC;IAC1B,CACF,CAAC;IACD,OAAOO,QAAQ,CAACG,IAAI;EACtB;;EAEA;EACA;EACA,aAAaY,OAAOA,CAACC,QAAQ,EAAE;IAC7B,MAAMC,MAAM,GAAG,MAAM1B,KAAK,CAACU,IAAI,CAAE,GAAE,IAAI,CAACC,QAAS,YAAW,EAAEc,QAAQ,EAAE;MACtER,OAAO,EAAE;QACP,GAAG,IAAI,CAACf,SAAS,CAAC,CAAC;QACnB,cAAc,EAAE;MAClB;IACF,CAAC,CAAC;IACF,OAAOwB,MAAM,CAACd,IAAI;EACpB;;EAEA;EACA,aAAae,oBAAoBA,CAAA,EAAG;IAClC,MAAMD,MAAM,GAAG,MAAM1B,KAAK,CAACgB,GAAG,CAC3B,GAAE,IAAI,CAACL,QAAS,4BACnB,CAAC;IACD,OAAOe,MAAM,CAACd,IAAI;EACpB;;EAEA;EACA,aAAagB,8BAA8BA,CACzCC,WAAW,EACXC,YAAY,EACZC,QAAQ,EACR;IACA,MAAML,MAAM,GAAG,MAAM1B,KAAK,CAACgB,GAAG,CAC3B,GAAE,IAAI,CAACL,QAAS,uDAAsDkB,WAAY;AACzF,kBAAkBC,YAAa,aAAYC,QAAS,EAChD,CAAC;IACD,OAAOL,MAAM,CAACd,IAAI;EACpB;;EAEA;EACA,aAAaoB,YAAYA,CAAA,EAAG;IAC1B,MAAMvB,QAAQ,GAAG,MAAMT,KAAK,CAACgB,GAAG,CAAE,GAAE,IAAI,CAACL,QAAS,cAAa,CAAC;IAChE,OAAOF,QAAQ,CAACG,IAAI;EACtB;EACA;EACA,aAAaqB,WAAWA,CAAA,EAAG;IACzB,MAAMP,MAAM,GAAG,MAAM1B,KAAK,CAACgB,GAAG,CAAE,GAAE,IAAI,CAACL,QAAS,YAAW,CAAC;IAC5D,OAAOe,MAAM,CAACd,IAAI;EACpB;EACA;EACA,aAAasB,WAAWA,CAACC,MAAM,EAAE;IAC/B,MAAMT,MAAM,GAAG,MAAM1B,KAAK,CAACgB,GAAG,CAC3B,GAAE,IAAI,CAACL,QAAS,qBAAoBwB,MAAO,EAC9C,CAAC;IACD,OAAOT,MAAM,CAACd,IAAI;EACpB;;EAEA;EACA,aAAawB,UAAUA,CAACD,MAAM,EAAE;IAC9B,MAAMT,MAAM,GAAG,MAAM1B,KAAK,CAACuB,MAAM,CAC9B,GAAE,IAAI,CAACZ,QAAS,iBAAgBwB,MAAO,EAAC,EACzC;MACElB,OAAO,EAAE,IAAI,CAACf,SAAS,CAAC;IAC1B,CACF,CAAC;IACD,OAAOwB,MAAM,CAACd,IAAI;EACpB;;EAEA;EACA,aAAayB,UAAUA,CAACF,MAAM,EAAEV,QAAQ,EAAE;IACxC,MAAMC,MAAM,GAAG,MAAM1B,KAAK,CAACsC,GAAG,CAC3B,GAAE,IAAI,CAAC3B,QAAS,iBAAgBwB,MAAO,EAAC,EACzCV,QAAQ,EACR;MACER,OAAO,EAAE;QACP,GAAG,IAAI,CAACf,SAAS,CAAC,CAAC;QACnB,cAAc,EAAE;MAClB;IACF,CACF,CAAC;IACD,OAAOwB,MAAM,CAACd,IAAI;EACpB;;EAEA;EACA;EACA,aAAa2B,QAAQA,CAACJ,MAAM,EAAEf,MAAM,EAAEoB,OAAO,EAAE;IAC7CC,OAAO,CAACC,GAAG,CAAC,cAAc,GAAGtB,MAAM,CAAC;IAEpC,MAAMX,QAAQ,GAAG,MAAMT,KAAK,CAACU,IAAI,CAC9B,GAAE,IAAI,CAACC,QAAS,uBAAsBwB,MAAO,IAAGf,MAAO,EAAC,EACzDoB,OAAO,EACP;MACEvB,OAAO,EAAE,IAAI,CAACf,SAAS,CAAC;IAC1B,CACF,CAAC;IACD,OAAOO,QAAQ,CAACG,IAAI;EACtB;;EAEA;EACA,aAAa+B,cAAcA,CAAA,EAAG;IAC5B,MAAMjB,MAAM,GAAG,MAAM1B,KAAK,CAACgB,GAAG,CAAE,GAAE,IAAI,CAACL,QAAS,eAAc,EAAE;MAC9DM,OAAO,EAAE,IAAI,CAACf,SAAS,CAAC;IAC1B,CAAC,CAAC;IACF,OAAOwB,MAAM,CAACd,IAAI;EACpB;;EAEA;EACA,aAAagC,4BAA4BA,CAACC,WAAW,EAAE;IACrD,MAAMnB,MAAM,GAAG,MAAM1B,KAAK,CAACgB,GAAG,CAC3B,GAAE,IAAI,CAACL,QAAS,sCAAqCkC,WAAY,EACpE,CAAC;IACD,OAAOnB,MAAM,CAACd,IAAI;EACpB;;EAEA;EACA,aAAakC,aAAaA,CAACC,SAAS,EAAE;IACpC,MAAMrB,MAAM,GAAG,MAAM1B,KAAK,CAACuB,MAAM,CAC9B,GAAE,IAAI,CAACZ,QAAS,oBAAmBoC,SAAU,EAAC,EAC/C;MACE9B,OAAO,EAAE,IAAI,CAACf,SAAS,CAAC;IAC1B,CACF,CAAC;IACD,OAAOwB,MAAM,CAACd,IAAI;EACpB;;EAEA;EACA,OAAOoC,MAAMA,CAAA,EAAG;IACd5C,YAAY,CAAC6C,UAAU,CAAC,OAAO,CAAC;IAChC7C,YAAY,CAAC6C,UAAU,CAAC,MAAM,CAAC;EACjC;EAEA,OAAOC,eAAeA,CAAA,EAAG;IACvB,MAAM/C,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,OAAO,CAAC,CAACF,KAAK;EAChB;EAEA,OAAOgD,OAAOA,CAAA,EAAG;IACf,MAAMC,IAAI,GAAGhD,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IACzC,OAAO+C,IAAI,KAAK,OAAO;EACzB;EAEA,OAAOC,MAAMA,CAAA,EAAG;IACd,MAAMD,IAAI,GAAGhD,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IACzC,OAAO+C,IAAI,KAAK,MAAM;EACxB;AACF;AACA;AAhOqBnD,UAAU,CACtBU,QAAQ,GAAG,uBAAuB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}